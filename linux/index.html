<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Linux - Anotações</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Linux";
    var mkdocs_page_input_path = "linux.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Anotações</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Welcome to MkDocs</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../amazon/">Amazon</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../banco_de_dados/">Banco de dados</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../bash/">Bash</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../benchmarks/">Benchmarks</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../docker/">Docker</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../firefox/">Firefox</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../git/">Git</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../golang/">Golang</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../html/">HTML</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../latex/">Latex</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Linux</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#use-cases">Use cases</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../mercurial/">Mercurial</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../perl/">Perl</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../python/">Python</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../ruby/">Ruby</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../vim/">Vim</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Anotações</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Linux</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="print-n-th-column-to-last-column">Print n-th column to last column</h1>
<p>From <a href="http://stackoverflow.com/questions/1602035/print-third-column-to-last-column">this StackOverflow thread</a>, this is how you can print from the n-th column to the last column of a line, using awk.</p>
<p>e.g. form the third column:</p>
<pre><code>awk '{ print substr($0, index($0,$3)) }'
</code></pre>
<h2 id="use-cases">Use cases</h2>
<p>This is useful with you want to analyse your own command's history, like:</p>
<pre><code>history | awk '{print substr($0, index($0,$2))}'
</code></pre>
<h1 id="wiping-a-file">Wiping a file</h1>
<pre><code class="language-bash">#!/usr/bin/env bash
set -euo pipefail
IFS=$'\n\t'

if [[ &quot;$#&quot; -ne 1 ]]; then
  echo &quot;Please use this command with the filename you want to wipe. Like:&quot;
  echo &quot;$0 file.txt&quot;
  exit 1
fi

_file=&quot;${1}&quot;

_times=8
filesize=$(stat -c %s &quot;${_file}&quot;)

# Zeroes
dd if=/dev/zero of=&quot;${_file}&quot; bs=&quot;${filesize}&quot; count=1 conv=notrunc
# Ones
dd if=&lt;(yes $'\xFF' | tr -d '\n') of=&quot;${_file}&quot; bs=&quot;${filesize}&quot; count=1 conv=notrunc

# Random stuff
for (( i = 0; i &lt; _times; i++ )); do
  dd if=/dev/urandom of=&quot;${_file}&quot; bs=&quot;${filesize}&quot; count=1 conv=notrunc
done
</code></pre>
<p>Made possible with the help of <a href="https://www.marksanborn.net/security/securely-wipe-a-file-with-dd/">Securely Wipe a File with DD</a> and <a href="https://stackoverflow.com/questions/10905062/how-do-i-get-an-equivalent-of-dev-one-in-linux">How do I get an equivalent of /dev/one in Linux</a></p>
<h1 id="how-to-use-multiple-dropbox-accounts-on-the-same-computer">How to use multiple dropbox accounts on the same computer</h1>
<p>From <a href="http://www.dropboxwiki.com/forums-faq/running-multiple-instances-of-dropbox">How Can I Use Multiple Dropbox Accounts on the Same Computer? - The Unofficial Dropbox Wiki</a>:</p>
<hr />
<p>First, create an alternate (hidden) directory for your second Dropbox account:</p>
<pre><code>mkdir ~/.dropbox-alt
</code></pre>
<p>Then run the Dropbox installer in “first use” mode, specifying the alternate home directory as follows:</p>
<pre><code>HOME=~/.dropbox-alt dropbox start -i
</code></pre>
<p>To run the “alternate” Dropbox manually for testing:</p>
<pre><code>HOME=~/.dropbox-alt ~/.dropbox-alt/.dropbox-dist/dropboxd
</code></pre>
<p>Create a shell script to start the alternate Dropbox daemon:</p>
<pre><code>cd ~/.dropbox-alt           # change to the "alternate" Dropbox directory
                            # which was created above
gedit dropbox-alt.sh        # create a new file with the 'gedit' text editor
</code></pre>
<p>Copy and paste the following lines into the editor:</p>
<pre><code>#!/bin/bash
HOME=$HOME/.dropbox-alt     # set the new home dir
cd                          # to the "new" $HOME
./.dropbox-dist/dropboxd &amp;  # and run dropboxd
</code></pre>
<p>Set the dropbox-alt.sh script to auto-start on login!</p>
<h1 id="find-and-replace-string-in-all-files">Find and Replace string in all files</h1>
<p>From <a href="http://stackoverflow.com/questions/15920276/find-and-replace-string-in-all-files-recursive-using-grep-and-sed">Find and Replace string in all files recursive using grep and sed</a>:</p>
<pre><code>grep -rl $oldstring /path/to/folder | xargs sed -i s@$oldstring@$newstring@g
</code></pre>
<h1 id="how-to-convert-between-formats">How to convert between formats</h1>
<h2 id="m4a-to-mp3">m4a to mp3</h2>
<pre><code>ffmpeg -i &lt;file&gt;.m4a -acodec libmp3lame -ab 128k &lt;file&gt;.mp3
</code></pre>
<h3 id="automatically">Automatically</h3>
<pre><code>for file in *m4a; do echo ffmpeg -i $file -acodec libmp3lame -ab 128k ${file%.*}.mp3; done
</code></pre>
<h1 id="how-to-remove-accent-characters">How to remove accent characters</h1>
<p>With the help of: http://www.linuxquestions.org/questions/linux-newbie-8/how-to-remove-accent-characters-4175431373/</p>
<pre><code>find . -type f -iname "*.py" | while read file; do
    iconv -f UTF-8 -t ASCII//TRANSLIT $file &gt; $file-tmp
    mv $file-tmp $file
done
</code></pre>
<h1 id="finding-hardware-information-on-linux">Finding Hardware Information on Linux</h1>
<p>From <a href="https://forums.linuxmint.com/viewtopic.php?t=136772">How to find information about hardware? - Linux Mint Forums</a></p>
<p>A more human readable output:</p>
<pre><code>inxi -Fx
</code></pre>
<p>This one was super useful in discovering the name of the Motherboard I was using.</p>
<p>For more detailed info:</p>
<pre><code>lshw
</code></pre>
<h1 id="hibernation-problems">Hibernation Problems</h1>
<p>After installing Linux Mint 20 Hibernation didn't work.</p>
<p>To make it work I followed <a href="https://forums.linuxmint.com/viewtopic.php?p=1495203&amp;sid=9b5eeffffe5ffd2073e04adbb276d15e#p1495203">this post</a> on how to update grub and merging <a href="https://forums.linuxmint.com/viewtopic.php?p=1854165#p1854165">this post's</a> <code>Action</code>s of the <code>com.ubuntu.enable-hibernate.pkla</code> file.</p>
<p>And creating the service to disable devices to wake up from hibernation as this <a href="https://unix.stackexchange.com/questions/602406/guide-on-how-to-enable-hibernation-on-linux-mint-20-cinnamon-ubuntu-20-and-pre">SO guide</a>, in my case I wanted to disable the keyboard from waking up the computer.</p>
<h1 id="mergejoin-images-on-command-line">Merge/Join images on command line</h1>
<p>Requires ImageMagick:</p>
<p>Vertical sprite:</p>
<p><code>convert image1.png image2.png image3.png -append result/result-sprite.png</code></p>
<p>Horizontal sprite:</p>
<p><code>convert image1.png image2.png image3.png +append result/result-sprite.png</code></p>
<p>﻿</p>
<h1 id="dicas-linux">Dicas Linux</h1>
<h2 id="how-do-i-list-all-cron-jobs-for-all-users">How do I list all cron jobs for all users?</h2>
<p>From <a href="http://stackoverflow.com/questions/134906/how-do-i-list-all-cron-jobs-for-all-users">How do I list all cron jobs for all users?</a> :</p>
<pre><code class="language-Bash"># As root:
for user in $(cut -f1 -d: /etc/passwd); do echo $user; crontab -u $user -l; done
</code></pre>
<h2 id="how-to-create-a-cpu-spike-with-a-bash-command">How to create a CPU spike with a bash command</h2>
<p>From <a href="http://stackoverflow.com/questions/2925606/how-to-create-a-cpu-spike-with-a-bash-command">How to create a CPU spike with a bash command</a> :</p>
<pre><code class="language-Bash">dd if=/dev/zero of=/dev/null
</code></pre>
<p>To run more of those to put load on more cores, try to fork it:</p>
<pre><code class="language-Bash">fulload() { dd if=/dev/zero of=/dev/null | dd if=/dev/zero of=/dev/null | dd if=/dev/zero of=/dev/null | dd if=/dev/zero of=/dev/null &amp; }; fulload; read; killall dd
</code></pre>
<p>Repeat the command in the curly brackets as many times as the number of threads you want to produce (here 4 threads). Simple enter hit will stop it (just make sure no other dd is running on this user or you kill it too).</p>
<h1 id="rsync">Rsync</h1>
<h2 id="pegando-e-enviando-arquivos-para-a-amazon">Pegando e enviando arquivos para a Amazon</h2>
<pre><code class="language-Bash">rsync -avz --progress -e &quot;ssh -i chave.pem&quot; ubuntu@ip:arquivo .
</code></pre>
<h2 id="apenas-arquivos-novos">Apenas arquivos novos</h2>
<p>Dicas <a href="http://www.electrictoolbox.com/rsync-ignore-existing-update-newer/">aqui</a></p>
<pre><code class="language-Bash">rsync --update -raz --progress &lt;origem&gt; &lt;destino&gt;
</code></pre>
<h2 id="how-to-gzip-a-directory-transfer-via-scp-and-decompress-in-one-command">How to gzip a directory, transfer via scp, and decompress in one command?</h2>
<pre><code class="language-Bash">rsync -az --progress source_dir/* remote_host:/destination_dir # Show progress bar
#or:
tar -zc path/to/source | ssh user@remote tar -zxC path/to/destination # Doesn't show progress bar
</code></pre>
<h2 id="rsync-on-a-different-ssh-port">Rsync on a different SSH port</h2>
<p>From <a href="https://stackoverflow.com/questions/4549945/is-it-possible-to-specify-a-different-ssh-port-when-using-rsync">Is it possible to specify a different ssh port when using rsync? - Stack Overflow</a>:</p>
<p><code>rsync -azvP -e 'ssh -p 2222' ./dir user@host:/path</code></p>
<h1 id="encontrando-arquivos-com-setuid-ativado">Encontrando arquivos com setuid ativado</h1>
<p>Com <a href="http://www.cyberciti.biz/faq/unix-bsd-linux-setuid-file/">ajuda</a>, conseguimos encontrar todos os arquivos que estão com setuid ativado. Isso foi útil para resolver um problema que estava dando no SAS devido ao fato dos bin não estarem setados com ele:</p>
<pre><code class="language-Bash">find . -xdev \( -perm -4000 \) -type f -print0 | xargs -0 ls -l
</code></pre>
<p>Para se setar o setuid basta se adicionar qual bit será será setado como steuid (u,g,o):</p>
<pre><code class="language-Bash">chmod 4444 arquivo
# ou
chmod 2444 arquivo
# ou
chmod 1444 arquivo
</code></pre>
<h1 id="mouse">Mouse</h1>
<p>Quando o touchpad parar de funcionar basta executar estes dois comandos:</p>
<pre><code class="language-Bash"># Como root:
modprobe -r psmouse
modprobe psmouse
</code></pre>
<h1 id="sort">Sort</h1>
<h3 id="sort-com-delimitador-diferente-de-espacos">Sort com delimitador diferente de espaços</h3>
<pre><code class="language-Bash">sort -t: myFile
</code></pre>
<h3 id="sort-n-esima-coluna">Sort n-ésima coluna</h3>
<pre><code class="language-Bash">sort -k3,3 myFile
</code></pre>
<h3 id="sort-com-ordenacao-numerica-de-verdade-9-100">Sort com ordenação numérica de verdade ( 9 &lt; 100 )</h3>
<pre><code class="language-Bash">sort -n myFile
</code></pre>
<h2 id="ativando-swap">Ativando swap</h2>
<p>Ativando swap, seguindo o <a href="https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04">tutorial da DigitalOcean</a>:</p>
<pre><code>#!/usr/bin/env bash
if [ $(id -u) -ne 0 ]; then echo &quot;Run as root&quot;; exit 1; fi
free -m
fallocate -l 4G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
swapon -s
free -m
</code></pre>
<h1 id="loop-com-arquivos-que-tem-espacos-no-nome">Loop com arquivos que têm espaços no nome</h1>
<p>Dicas extraídas <a href="http://askubuntu.com/questions/343727/filenames-with-spaces-breaking-for-loop-find-command">daqui</a> e <a href="http://www.cyberciti.biz/tips/handling-filenames-with-spaces-in-bash.html">daqui</a>.</p>
<pre><code class="language-Bash">find . -print0 | while read -d $'\0' file; do cp -v &quot;$file&quot; /tmp; done
</code></pre>
<pre><code class="language-Bash">find . -type f -name '*.*' -printf '%p\0' | tar --null -uf archive.tar -T -
</code></pre>
<h1 id="descobrindo-a-placa-de-video">Descobrindo a placa de vídeo</h1>
<p>Para se decobrir qual placa de vídeo estamos usando podemos utilizar o <code>lspci</code> como descrito <a href="http://www.binarytides.com/linux-get-gpu-information/">aqui</a> e <a href="http://www.cyberciti.biz/faq/linux-tell-which-graphics-vga-card-installed/">aqui</a>:</p>
<pre><code class="language-Bash">lspci -v
</code></pre>
<h1 id="copying">Copying</h1>
<h2 id="avoid-copy-if-files-exist-in-destination">Avoid copy if files exist in destination</h2>
<pre><code>cp -R -u -p /source /destination
</code></pre>
<p>Due to these options:</p>
<pre><code>-p                           same as --preserve=mode,ownership,timestamps
    --preserve[=ATTR_LIST]   preserve the specified attributes (default:
                            mode,ownership,timestamps), if possible
                            additional attributes: context, links, xattr,
                            all
-R, -r, --recursive          copy directories recursively
    --reflink[=WHEN]         control clone/CoW copies. See below
    --remove-destination     remove each existing destination file before
                            attempting to open it (contrast with --force)
    --sparse=WHEN            control creation of sparse files. See below
    --strip-trailing-slashes  remove any trailing slashes from each SOURCE
                            argument
-u, --update                 copy only when the SOURCE file is newer
                            than the destination file or when the
                            destination file is missing
</code></pre>
<h1 id="displaying-todays-files-only">Displaying Today’s Files Only</h1>
<pre><code>find -maxdepth 1 -type f -mtime -1
</code></pre>
<h1 id="how-to-zip-files-that-are-listed-in-a-text-file">How to zip files that are listed in a text file</h1>
<pre><code>cat input.txt | zip filename.zip -@
</code></pre>
<h1 id="desabilitando-um-usuario-mas-sem-apaga-lo">Desabilitando um usuário, mas sem apagá-lo</h1>
<pre><code>usermod --expiredate 1 [LOGIN]

passwd -l [LOGIN]
</code></pre>
<h1 id="iptables-firewall">IPTables (Firewall)</h1>
<p>Algumas dicas interessantes:</p>
<ul>
<li><a href="http://stackoverflow.com/questions/10197405/iptables-remove-specific-rules">Apagando uma regra do firewall por linha</a></li>
<li><a href="http://www.thegeekstuff.com/2011/02/iptables-add-rule/">Um bom tutorial explicando como funciona</a></li>
<li><a href="https://wiki.centos.org/HowTos/Network/IPTables">Um tutorial simples</a></li>
</ul>
<p>Listando as regras, com portas e número das linhas:</p>
<pre><code>iptables -L -n --line-numbers
</code></pre>
<p>Apagando uma linha específica:</p>
<pre><code>iptables -D INPUT [num]
</code></pre>
<p>Adicionando regra para novas conexões:</p>
<pre><code>iptables -A INPUT -m state --state NEW -p tcp --dport [porta] -j ACCEPT
</code></pre>
<p>Regra para se rejeitar demais conexões:</p>
<pre><code>iptables -A INPUT -j REJECT --reject-with icmp-host-prohibited
iptables -A INPUT -j DROP
</code></pre>
<p>Bloqueando acesso de saída (upload) de um IP:</p>
<pre><code>iptables -A OUTPUT -d [ip-address] -j DROP
</code></pre>
<p>Bloqueando saída por porta:</p>
<pre><code>iptables -A OUTPUT -p tcp --dport [port] -j DROP
</code></pre>
<p>To block tcp port for an IP address:</p>
<pre><code>iptables -A OUTPUT -p tcp -d [ip address] --dport [port] -j DROP
</code></pre>
<h1 id="how-to-run-multiple-simultaneous-x-window-sessions">How to run multiple simultaneous X Window sessions</h1>
<p>From <a href="http://linuxcommando.blogspot.com.br/2015/02/how-to-run-multiple-simultaneous-x.html">Linux Commando</a></p>
<ul>
<li>Switch to a virtual terminal<ul>
<li>By default, six virtual text terminals are available to you (Ctrl+Alt+F1 to F6)</li>
<li>Press Control+Alt+F1 to go to virtual terminal 1</li>
</ul>
</li>
<li>Login as her</li>
<li>Execute the following command
    <code>startx -- :1</code></li>
<li>This starts another X session using the first free graphical console.<ul>
<li>By default, 6 X consoles are available (Ctrl+Alt+F7 to F12)</li>
<li>Your own existing X session is Ctrl+Alt+F7</li>
<li>The next free X console is therefore Ctrl+Alt+F8</li>
</ul>
</li>
<li>To switch from her X session to yours, and vice versa, press Ctrl+Alt+F7 and Ctrl+Alt+F8 respectively.</li>
</ul>
<p>You may use the above procedure to create up to 5 additional X sessions (Ctrl+Alt+F8 to Ctrl+Alt+F12).
For each additional X session, increment the console number in both step 1 and 3.
For instance, switch to virtual terminal 2 (Control+Alt+F2) to execute the command <code>startx -- :2</code>.</p>
<h1 id="create-another-ssh-server">Create another SSH server</h1>
<p>Sometimes you need to debug your SSH connection, for those times you can open another SSH server and watch what is happening inside it.</p>
<pre><code>/usr/sbin/sshd -d -p 2222
</code></pre>
<p>And when (from other machine) need to connect to it:</p>
<pre><code>ssh -p 2222 user@machine
</code></pre>
<h1 id="no-wired-connection-after-suspend">No wired connection after suspend</h1>
<p><strong>(Not tested yet)</strong></p>
<p>From <a href="http://ubuntuforums.org/showthread.php?t=2179603">this Ubuntu Forum thread</a>:</p>
<ul>
<li>Get the Kernel module with <code>lspci -k | grep -iA3 NETWORK</code> or <code>lspci -k | grep -iA3 ethernet</code></li>
<li>Edit <code>/etc/pm/config.d/modules</code><ul>
<li>Add <code>SUSPEND_MODULES="&lt;the_kernel_module_for_your_network_card&gt;"</code></li>
</ul>
</li>
</ul>
<p>Or in one shot:</p>
<pre><code>lspci -k | grep -iA3 ethernet | grep -i "Kernel driver" | awk '{print $NF}'
</code></pre>
<p>Knowing that your Kernel module is 8139:</p>
<ol>
<li>
<p>Unload 8139:</p>
<p>sudo modprobe -r 8139</p>
</li>
<li>
<p>Suspend:</p>
<p>sudo pm-suspend</p>
</li>
<li>
<p>Resume the computer from suspend</p>
</li>
<li>
<p>Reload the module:</p>
<p>sudo modprobe 8139</p>
</li>
<li>
<p>Test the network connection.</p>
</li>
</ol>
<h1 id="validating-rsa-public-keys">Validating RSA public keys</h1>
<pre><code>ssh-keygen -l -f key.pub
</code></pre>
<p>More info on <a href="http://serverfault.com/questions/453296/how-do-i-validate-a-rsa-ssh-public-key-file-id-rsa-pub">How do I validate a RSA ssh public key file (id_rsa.pub)? - Server Fault</a></p>
<h1 id="getting-you-own-key-from-the-command-line">Getting you own key from the command line</h1>
<p>To get your fingerprint</p>
<pre><code>ssh-add -l
</code></pre>
<p>To get your public key</p>
<pre><code>ssh-add -L
</code></pre>
<p>This is useful when you are inside a Docker container that has your keys forwarded to it using:</p>
<pre><code>-v $(dirname $SSH_AUTH_SOCK):$(dirname $SSH_AUTH_SOCK)
-e SSH_AUTH_SOCK=$SSH_AUTH_SOCK
</code></pre>
<h1 id="getting-home-directory-by-username">Getting home directory by username</h1>
<pre><code>eval echo ~$USER
</code></pre>
<h1 id="how-do-i-find-out-which-process-is-eating-up-my-bandwidth">How do I find out which process is eating up my bandwidth</h1>
<p>From <a href="http://askubuntu.com/questions/2411/how-do-i-find-out-which-process-is-eating-up-my-bandwidth">networking - How do I find out which process is eating up my bandwidth? - Ask Ubuntu</a>:</p>
<pre><code>sudo apt-get install -y nethogs
sudo nethogs eth0
</code></pre>
<p>Another way:</p>
<ul>
<li>Run <code>sudo iftop</code></li>
<li>Push <code>S</code> or <code>D</code> to display Source and Destination ports</li>
<li>Then use <code>netstat -tup</code> to discover the process</li>
</ul>
<h1 id="discovering-available-versions-of-a-package-to-install">Discovering available versions of a package to install</h1>
<p>Discover which versions are available using one of the following commands:</p>
<pre><code>apt-cache policy &lt;package-name&gt;
apt-cache madison &lt;package-name&gt;
</code></pre>
<p>Then, to install the chosen version:</p>
<pre><code>sudo apt-get install package=version
</code></pre>
<h1 id="copying-text-from-the-command-line">Copying text from the command line</h1>
<pre><code>xclip -sel clip &lt; ~/.ssh/id_rsa.pub
</code></pre>
<h1 id="which-package-an-executable-came-from">Which package an executable came from?</h1>
<p>With the help of <a href="http://askubuntu.com/questions/257905/how-can-i-tell-which-package-an-executable-came-from">apt - How can I tell which package an executable came from? - Ask Ubuntu</a> there are two alternatives:</p>
<pre><code>sudo apt-get install apt-file
# It takes a bit of time
sudo apt-file update
apt-file search filename
</code></pre>
<p>OR</p>
<pre><code>dpkg-query -S [executable]
</code></pre>
<h1 id="finding-the-size-of-files-older-than-x-days">Finding the size of files older than X days</h1>
<p>With the great help of <a href="http://unix.stackexchange.com/questions/21678/is-there-a-way-to-sum-up-the-size-of-files-listed">StackOverflow</a>:</p>
<pre><code>find . -mtime +180 -exec ls -lrt {} \; | awk '{ total += $5}; END { print total }'
</code></pre>
<p>It will give the total size of files, in bytes.</p>
<p>But if you want to see the sizes in a more human readable way:</p>
<pre><code>find . -mtime +180 -exec ls -lrt {} \; | awk '{ total += $5}; END { print total }' | awk '{ split( &quot;KB MB GB&quot; , v ); s=0; while( $1&gt;1024 ){ $1/=1024; s++ } print int($1) v[s] }'
</code></pre>
<h1 id="create-disk-image">Create disk image</h1>
<p>From <a href="about:reader?url=https%3A%2F%2Fwiki.archlinux.org%2Findex.php%2FDd%23Disk_cloning_and_restore#Disk_cloning_and_restore">dd - ArchWiki</a></p>
<p>Boot from a live media and make sure no partitions are mounted from the source hard drive.</p>
<p>Then mount the external hard drive and backup the drive:</p>
<p><code>dd if=/dev/sda conv=sync,noerror bs=64K | gzip -c  &gt; /path/to/backup.img.gz</code></p>
<p>If necessary (e.g. when the format of the external HD is FAT32) split the disk image in volumes (see also the split man pages):</p>
<p><code>dd if=/dev/sda conv=sync,noerror bs=64K | gzip -c | split -a3 -b2G - /path/to/backup.img.gz</code></p>
<p>If there is not enough disk space locally, you may send the image through ssh:</p>
<p><code>dd if=/dev/sda conv=sync,noerror bs=64K | gzip -c | ssh user@local dd of=backup.img.gz</code></p>
<p>Finally, save extra information about the drive geometry necessary in order to interpret the partition table stored within the image. The most important of which is the cylinder size.</p>
<p><code>fdisk -l /dev/sda &gt; /path/to/list_fdisk.info</code></p>
<p>Note: You may wish to use a block size (bs=) that is equal to the amount of cache on the HD you are backing up. For example, bs=8192K works for an 8 MiB cache. The 64 KiB mentioned in this article is better than the default bs=512 bytes, but it will run faster with a larger bs=.</p>
<h1 id="restore-system">Restore system</h1>
<p>To restore your system:</p>
<p><code>gunzip -c /path/to/backup.img.gz | dd of=/dev/sda</code></p>
<p>When the image has been split, use the following instead:</p>
<p><code>cat /path/to/backup.img.gz* | gunzip -c | dd of=/dev/sda</code></p>
<h1 id="how-to-create-a-temporary-ftp-server">How to create a temporary ftp server</h1>
<p>Using <a href="https://pyftpdlib.readthedocs.io/en/latest/tutorial.html#command-line-usage">pyftpdlib</a>:</p>
<pre><code>pip3 install --user pyftpdlib
python3 -m pyftpdlib --port=2121 --write --username=user --password=password
</code></pre>
<p>This will create an FTP server listening on port <code>2121</code> accepting connections that can write into the current directory.</p>
<h1 id="group-aws-ecr-images">Group AWS ECR images</h1>
<p>With the help of https://github.com/stedolan/jq/issues/274#issuecomment-64925860</p>
<pre><code class="language-bash">aws ecr list-images --repository-name ${repository_name} | jq '.[] | group_by(.imageDigest) | map({&quot;digest&quot;: .[0].imageDigest, &quot;tags&quot;: map(.imageTag)})'
</code></pre>
<p>This will display all the tags associated with the image digest.</p>
<p><a href="https://unix.stackexchange.com/a/298947">xorg - List all valid kbd layouts, variants and toggle options (to use with setxkbmap)</a>:</p>
<pre><code>    Take a look at localectl, especially following options:

    localectl list-x11-keymap-layouts - gives you layouts (~100 on modern systems)
    localectl list-x11-keymap-variants de - gives you variants for this layout (or all variants if no layout specified, ~300 on modern systems)
    localectl list-x11-keymap-options | grep grp: - gives you all layout switching options
</code></pre>
<h1 id="onde-logs-estao-localizados-no-linux">Onde logs estão localizados no Linux</h1>
<h2 id="logs-de-ssh">Logs de ssh</h2>
<ul>
<li>/var/log/auth.log</li>
<li>/var/log/secure</li>
<li><code>journalctl -u sshd | tail -100</code></li>
</ul>
<h1 id="simple-monitoring-with-gkrellm">Simple monitoring with gkrellm</h1>
<p>On the remote (to be monitored computer):</p>
<pre><code class="language-bash">sudo sh -c 'apt-get update &amp;&amp; apt-get install -y gkrellmd'
</code></pre>
<p>On your local machine, create an SSH tunnel to the remote machine:</p>
<pre><code class="language-bash">ssh -N -f -L 19151:127.0.0.1:19150 user@remote_machine_ip
</code></pre>
<p>Open gkrellm on your machine listening to the local port that will receive information:</p>
<pre><code>gkrellm -s 127.0.0.1 -P 19151
</code></pre>
<p>Help from https://totallynoob.com/server-monitoring-remote-monitor-a-server-with-gkrellm-via-ssh-tunnel/</p>
<h1 id="limiting-the-bandwith-for-a-program">Limiting the bandwith for a program</h1>
<pre><code class="language-bash">trickle -s -d 100 -u 100 &lt;program&gt;
</code></pre>
<p>Uses <code>trickle</code> to limit the bandwith that will be used by a program.</p>
<h1 id="discover-other-machines-on-your-network">Discover other machines on your network</h1>
<p>Grab your IP with a <code>ifconfig</code> then later use a <code>nmap</code> to scan your network, something like:</p>
<pre><code class="language-bash">sudo nmap -sP 10.253.0.0/16
</code></pre>
<h1 id="updating-the-dns-being-used">Updating the DNS being used</h1>
<p>Check which DNS you are using:</p>
<pre><code class="language-bash">nslookup google.com
</code></pre>
<p>It is using the IPs that appear on <code>Server</code> and <code>Address</code>.
To change it:</p>
<p>Add</p>
<pre><code>nameserver 8.8.8.8
nameserver 1.1.1.1
</code></pre>
<p>to <code>/etc/resolvconf/resolv.conf.d/head</code> and</p>
<pre><code class="language-bash">sudo resolvconf -u
</code></pre>
<p>Validate that the DNS has been updated:</p>
<pre><code class="language-bash">nslookup google.com
</code></pre>
<p>Thanks to https://www.linuxquestions.org/questions/linux-networking-3/how-to-change-the-dns-server-in-linux-mint-and-should-i-4175597949/#post5658301</p>
<h1 id="installing">Installing</h1>
<pre><code>sudo apt-get install -y pass
</code></pre>
<p>Do not forget to configure the <a href="https://git.zx2c4.com/password-store/tree/src/completion">completion</a> for your preferred shell.</p>
<h1 id="before-using-it">Before using it</h1>
<p>Before using <code>pass</code> we need to have a key generated by <code>GnuPG</code> with:</p>
<pre><code>gpg2 --gen-key
</code></pre>
<p>As it may take a lot of time, specially for it to gather enough entropy, one can use this solution from <a href="https://serverfault.com/questions/471412/gpg-gen-key-hangs-at-gaining-enough-entropy-on-centos-6">StackOverflow</a>:</p>
<blockquote>
<p>Anytime I've seen it (gpg --gen-key) hang like this, I log in to another shell and start a "dd if=/dev/sda of=/dev/zero" and it takes off after a few seconds / minutes.</p>
</blockquote>
<p>By my experience, even using this method it still took around 10 minutes for the key generation.</p>
<h2 id="exporting-keys">Exporting Keys</h2>
<p>If you need to export your keys to another machine one can follow the commands that are described in this <a href="https://unix.stackexchange.com/questions/226944/pass-and-gpg-no-public-key">StackOverflow question</a>.</p>
<pre><code>$ gpg --export-secret-keys &gt; keyfile
$ gpg2 --import keyfile
</code></pre>
<p>Here they explicitly use different versions of GnuPG as the new versions of <code>pass</code> use <code>gpg2</code>.</p>
<h1 id="setting-up">Setting up</h1>
<p>According to the <a href="https://www.passwordstore.org/">official site tutorial</a> and the <a href="https://git.zx2c4.com/password-store/about/#EXTENDED%20GIT%20EXAMPLE">extended git example</a> we can start using it like this:</p>
<ul>
<li>
<p>List your current available keys</p>
<p>gpg2 --list-key</p>
</li>
<li>
<p>And use one of those keys with pass</p>
<p>pass init key@mail</p>
<p>pass git init</p>
</li>
<li>
<p>All files will be saved on <code>~/.password-store</code> directory</p>
</li>
<li>
<p>If you have somewhere to push your passwords</p>
<p>pass git remote add origin the-place-you-will-push-to:branch</p>
</li>
<li>
<p>Start inserting or generating your passwords</p>
<p>pass generate A/B/mail@place.com 21
pass insert A/B/mail@place.com</p>
</li>
<li>
<p>When you are finished saving your passwords push them</p>
<p>pass git push -u --all</p>
</li>
</ul>
<p>More information on how to use <code>pass</code> can be found on <a href="https://www.passwordstore.org/">its page</a> and reading the <a href="https://git.zx2c4.com/password-store/about/">man page</a>.</p>
<h1 id="reaffirming-trust">Reaffirming trust</h1>
<p>If you receive some error like this one after reimporting your key</p>
<pre><code>gpg: &lt;KEY&gt;: There is no assurance this key belongs to the named user
gpg: [stdin]: encryption failed: Unusable public key
</code></pre>
<p>you can do as suggest on this <a href="https://stackoverflow.com/questions/33361068/gnupg-there-is-no-assurance-this-key-belongs-to-the-named-user">StackOverflow thread</a> and do a</p>
<pre><code class="language-bash">gpg2 --edit-key &lt;KEY&gt;
gpg&gt; trust
# Answer that you trust ultimately (5)
# Answer yes
</code></pre>
<h1 id="reduce-size-of-pdf-files">Reduce size of PDF files</h1>
<ul>
<li><a href="http://askubuntu.com/questions/113544/how-can-i-reduce-the-file-size-of-a-scanned-pdf-file">compression - How can I reduce the file size of a scanned PDF file? - Ask Ubuntu</a></li>
<li><a href="http://askubuntu.com/questions/207447/how-to-reduce-the-size-of-a-pdf-file">compression - How to reduce the size of a pdf file? - Ask Ubuntu</a></li>
<li><a href="http://jorge.fbarr.net/2012/11/29/reducing-pdf-file-size-in-linux/">Reducing PDF file-size in Linux | The Road to Elysium</a></li>
<li><a href="http://www.cyberciti.biz/faq/ignore-shell-aliases-functions-when-running-command/">Bash Shell: Ignore Aliases and Functions When Running A Command</a></li>
</ul>
<p>Low quality options:</p>
<pre><code>gs -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/screen -sOutputFile=new_file.pdf original_file.pdf
gs -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/ebook -sOutputFile=new_file.pdf original_file.pdf
</code></pre>
<p>The best balance was found in:</p>
<pre><code>gs -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/default -sOutputFile=new_file.pdf original_file.pdf
</code></pre>
<p><strong>Note:</strong> You may need to issue the command with a backslash in front of it if you use 'gs' as an alias:</p>
<pre><code>\gs -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/default -sOutputFile=new_file.pdf original_file.pdf
</code></pre>
<h1 id="splitting-and-merging-pdf-files">Splitting and merging PDF files</h1>
<p>With hints from:</p>
<ul>
<li><a href="http://linuxcommando.blogspot.com.br/2013/02/splitting-up-is-easy-for-pdf-file.html">Linux Commando: Splitting up is easy for a PDF file</a></li>
<li><a href="http://linuxcommando.blogspot.com.br/2014/01/how-to-split-up-pdf-files-part-2.html">Linux Commando: How to split up PDF files - part 2</a></li>
<li>
<p><a href="http://linuxcommando.blogspot.com.br/2015/03/how-to-merge-or-split-pdf-files-using.html">Linux Commando: How to merge or split pdf files using convert</a></p>
<p>sudo apt-get update &amp;&amp; sudo apt-get install -y pdftk</p>
</li>
</ul>
<h2 id="splitting">Splitting</h2>
<p>You can specify page ranges like this:</p>
<pre><code>pdftk myoldfile.pdf cat 1-2 4-5 output mynewfile.pdf
</code></pre>
<p>pdftk has a few more tricks in its back pocket. For example, you can specify a burst operation to split each page in the input file into a separate output file.</p>
<pre><code>pdftk myoldfile.pdf burst
</code></pre>
<p>By default, the output files are named pg_0001.pdf, pg_0002.pdf, etc.</p>
<h2 id="merging">Merging</h2>
<p>pdftk is also capable of merging multiple pdf files into one pdf.</p>
<pre><code>pdftk pg_0001.pdf pg_0002.pdf pg_0004.pdf pg_0005.pdf output mynewfile.pdf
</code></pre>
<p>That would merge the files corresponding to the first, second, fourth and fifth pages into a single output pdf.</p>
<h1 id="joiningmerging-pdf-pagesfiles-into-a-single-one">Joining/merging pdf pages/files into a single one</h1>
<p>Install <code>pdfjam</code> from <code>texlive-latex-recommended</code>:</p>
<pre><code class="language-bash">sudo apt-get install -y texlive-latex-recommended
</code></pre>
<p>Merge files with:</p>
<pre><code class="language-bash">pdfjam Page1.pdf Page2.pdf --nup 2x1 --landscape --outfile Page1_2.pdf
</code></pre>
<p>Merge pages from the same file:</p>
<pre><code class="language-bash">pdfjam file.pdf --nup 2x1 --landscape --outfile together.pdf
</code></pre>
<p>All this was possible with the help of https://superuser.com/questions/366490/how-to-merge-multiple-pdf-files-onto-one-page-with-pdftk/750293#750293</p>
<h1 id="join-png-files-into-single-pdf">Join png files into single PDF</h1>
<pre><code>pdfjoin --a4paper --fitpaper false --rotateoversize false *.png
</code></pre>
<p>Or</p>
<pre><code>convert *.png -compress jpeg -quality 50 result.pdf
</code></pre>
<p>Thanks to: https://stackoverflow.com/questions/4778635/merging-png-images-into-one-pdf-file</p>
<h1 id="convert-pdfs-into-jpegs">Convert PDFs into JPEGs</h1>
<h2 id="all-pages-into-the-same-file">All pages into the same file</h2>
<pre><code>for i in *.pdf; do convert -density 600 -append $i ${i%.*}.jpg; done
</code></pre>
<p>With the help of <a href="https://stackoverflow.com/questions/20075087/how-to-merge-images-in-command-line">linux - How to merge images in command line? - Stack Overflow</a></p>
<h1 id="printers-adventures-on-linux">Printers Adventures on Linux</h1>
<p>To make the Brother MFC-L2730DW work (I was only able to make it work on a LinuxMint 18.3 Virtual Machine, couldn't make it work on 20)</p>
<p>Basically you have to <a href="https://support.brother.com/g/b/downloadlist.aspx?c=ca&amp;lang=en&amp;prod=mfcl2730dw_us_eu_as&amp;os=128">download the drivers</a> only the "Driver install tool is enough" and follow the recommendations from <a href="https://wayneoutthere.com/2016/05/28/brother-printer-scanner-ubuntu-how-to/">How to Make a Brother Printer and Scanner Work in Ubuntu</a> and update the <code>/lib/udev/rules.d/60-libsane1.rules</code> file with:</p>
<pre><code>ATTRS{idVendor}==&quot;04f9&quot;, ATTRS{idProduct}==&quot;0439&quot;, ENV{libsane_matched}=&quot;yes&quot;
</code></pre>
<hr />
<p>Copy Paste of <a href="https://wayneoutthere.com/2016/05/28/brother-printer-scanner-ubuntu-how-to/">How to Make a Brother Printer and Scanner Work in Ubuntu</a>:</p>
<pre><code>EDIT 2020-06-19
Long time no edit!  My instructions below still mostly work it seems (which is bad on Brother for not making this more simple – fail, fail fail)

I wanted to add a quick note for 18.04 generation Ubuntu friends to consider as you are working through my nasty old messy post below:

First, if you are installing a network scanner / printer and you get the question “Select the number of destination Device URI” question, I just type the number 14 (A): Auto. option at the bottom.  Seems to work…

Then, be ready to provide your printers IP address.  If you didn’t know you can usually grab this from your router admin settings (I find this easier) or you can find it by pushing some buttons on the printer itself but I recall this was annoying… in either case you will need to punch in the ip address of the printer during setup so have it ready.

For the ‘libsane udev’ stuff below, the file has seemingly changed in recent ubuntu.  It now seems to be

60-libsane1.rules

Hope these updates help!

———————————–

*THIS WILL UNDERGO SOME EDITS BETWEEN OCT 31st and Nov 4th, 2016.  If you can get some answers below, great, but hopefully next week it will be more clear and helpful to more models of printers.

*Make sure to read my edits below this before starting as some things have changed…

*many edits below!  don’t start till you’ve skimmed them all

*PRE-note: if you can buy HP it’s probably better for you.  If you like pain like me, or already have pain, read on.

For some reason Brother printers are kind of hard to make work in Ubuntu for me.  Especially the scanner part.  They claim to support ‘linux’ but it’s not typically plug in play for me.  However, they are ghetto cheap so I buy them and pay for the savings in set up pain.  Oh well.  But this time I’m wising up and I’m blogging this for myself (and mom) so that we can get it set up quicker when we do upgrades or machine changes.  The main issue always seems to be this:

    Install the drivers with the command line as per the ‘pretty decent’ generic software from Brother found here: LINK TO UBUNTU BROTHER PRINTER DRIVERS
    select ‘linux’select ‘Linux (deb’)’Choose ‘driver install tool’ if you can which gets both the printer and the scanner going.’Agree to the EULA and Download’

    save file.  it will go to your ‘downloads’ folder if you have not told your browser to download it somewhere else.  You will need to know this for the next part so take a moment after the download to confirm it downloaded and you know where it is.
    follow instructions that appear on brother site right after downloading drivers, but here they are as of today (make sure on their site it’s up to date and don’t fully trust mine).Step1. Download the tool.(linux-brprinter-installer-*.*.*-*.gz)The tool will be downloaded into the default “Download” directory.
    (The directory location varies depending on your Linux distribution.)
    e.g. /home/(LoginName)/Download

    Step2. Open a terminal window and go to the directory you downloaded the file to in the last step.

    Step3. Enter this command to extract the downloaded file:

    Command: gunzip linux-brprinter-installer-*.*.*-*.gz

    Step4. Get superuser authorization with the “su” command or “sudo su” command.

    Step5. Run the tool:

    Command: bash linux-brprinter-installer-*.*.*-* Brother machine name

    Step6. The driver installation will start. Follow the installation screen directions.


     When you see the message “Will you specify the DeviceURI ?”,

     For USB Users: Choose N(No)
     For Network Users: Choose Y(Yes) and DeviceURI.

    The install process may take some time. Please wait until it is complete.
    Do this:
    1. Open “/lib/udev/rules.d/40-libsane.rules” file with ‘sudo nano’ command
    2.  Add the following two lines to the end of the device list. (Before the line “# The following rule will disable …”):
    Copy to your computer memory this:
    # Brother scanners
    ATTRS{idVendor}==”04f9″, ENV{libsane_matched}=”yes”   &lt;–Paste it in with the special ‘control+shift+v’ (don’t use just regular control+v) feature in terminal

    Reboot the machine (you can just type sudo reboot if you are still in terminal and want it done fast…)
    open simple scan software from dash and try a test scan

For me, without doing step #2 above the printer will usually work but not the scanner.

Which makes me wonder if there is really any Ubuntu support at all…

But my ghetto printer/scanner is doing its job so oh well.

Hope this helps!
</code></pre>
<ul>
<li><a href="https://support.brother.com/g/b/downloadlist.aspx?c=ca&amp;lang=en&amp;prod=mfcl2730dw_us_eu_as&amp;os=128">Downloads | MFC-L2730DW | Canada | Brother</a></li>
<li>
<p><a href="https://wayneoutthere.com/2016/05/28/brother-printer-scanner-ubuntu-how-to/">How to Make a Brother Printer and Scanner Work in Ubuntu – Wayne Out There</a></p>
</li>
<li>
<p><a href="https://forums.linuxmint.com/viewtopic.php?t=262330">[SOLVED] Brother MFC-L2730DW - Scanner Segfault (24-bit Mode Only) - Linux Mint Forums</a></p>
</li>
<li><a href="https://askubuntu.com/questions/911941/how-do-i-diagnose-brother-mfc-scanner-issues-on-ubuntu-linux">printing - How do I diagnose Brother MFC scanner issues on Ubuntu Linux? - Ask Ubuntu</a></li>
<li><a href="https://support.brother.com/g/b/downloadhowto.aspx?c=ca&amp;lang=en&amp;prod=mfcl2730dw_us_eu_as&amp;os=128&amp;dlid=dlf006893_000&amp;flang=4&amp;type3=625">Utilities | Downloads | MFC-L2730DW | Canada | Brother</a></li>
<li><a href="https://tutorialforlinux.com/2018/12/20/printer-brother-mfc-l2730dw-mfc-l2732dw-driver-linux-mint-19-how-to-download-and-install/">Printer Brother MFC-L2730DW / MFC-L2732DW Driver Linux Mint 19 How to Download and Install | tutorialforlinux.com</a></li>
<li><a href="https://www.brother.is/support/mfc-l2730dw/faqs/how-to-trouble-shooting">MFC-L2730DW FAQ Categories | Brother Support</a></li>
<li>
<p><a href="https://wiki.archlinux.org/index.php/CUPS/Printer-specific_problems">CUPS/Printer-specific problems - ArchWiki</a></p>
</li>
<li>
<p><a href="https://askubuntu.com/questions/48982/how-can-i-connect-usb-printer-in-virtual-box-ose-win-xp">virtualbox - How Can I connect USB Printer in Virtual Box OSE Win XP - Ask Ubuntu</a></p>
</li>
<li><a href="https://www.techrepublic.com/article/how-to-enable-usb-in-virtualbox/">How to enable USB in VirtualBox - TechRepublic</a></li>
<li><a href="https://www.virtualbox.org/wiki/Downloads">Downloads – Oracle VM VirtualBox</a></li>
<li><a href="https://www.virtualbox.org/wiki/Download_Old_Builds_6_1">Download_Old_Builds_6_1 – Oracle VM VirtualBox</a></li>
</ul>
<h1 id="displaying-a-function-definition">Displaying a function definition</h1>
<p>If you have a bash defined funcion, e.g. foobar, and want to display its definition you can:</p>
<p><code>type foobar</code> To discover its location
<code>declare -f foobar</code> To display its definition</p>
<p>Found this info at <a href="https://stackoverflow.com/questions/6916856/can-bash-show-a-functions-definition">Can bash show a function's definition? - Stack Overflow</a>.</p>
<h1 id="bang-commands">Bang commands</h1>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>!!</td>
<td>Will execute the last command. Same as !-1 or "up-arrow + return". The most common use is sudo !! when issued command failed due to insufficient privileges.</td>
</tr>
<tr>
<td>!n</td>
<td>Will execute the line n of the history record.   In most cases using mouse is a better deal</td>
</tr>
<tr>
<td>!-n</td>
<td>Will execute the command n lines back.  You usually remember the last three-four command you issues so !-2 and !-3 speed things up.</td>
</tr>
<tr>
<td>!gzip</td>
<td>will re-execute the most recent gzip command (history is searched  in reverse order). String specified is considered to be the prefix of the  command.</td>
</tr>
<tr>
<td>!?etc.gz</td>
<td>same as above but the unique string doesn't have to be at the start of the command. That means that you can identify command by a unique string appearing anywhere in the command  (might be faster then Ctrl-R  mechanism)</td>
</tr>
<tr>
<td>!!:1</td>
<td>designates the first argument of the last command.  This can be shortened to !1.</td>
</tr>
<tr>
<td>!!:$</td>
<td>designates the last argument of the preceding command. This may be shortened to !$.</td>
</tr>
</tbody>
</table>
<p>I think you need you need to know  five major bang commands (!!, !!:h, !!:f, !$, !1)</p>
<h2 id="useful-idioms">Useful idioms</h2>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>sudo !!</td>
<td>reexecute the last command with prefix sudo.</td>
</tr>
<tr>
<td>cd !$</td>
<td>cd to the directory which is the last argument of the previous command.</td>
</tr>
</tbody>
</table>
<h2 id="retrieving-previous-command-arguments">Retrieving previous command arguments</h2>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>!:0</td>
<td>is the previous command name</td>
</tr>
<tr>
<td>!^, !:2, !:3, …, !$</td>
<td>are the arguments of the previous command</td>
</tr>
<tr>
<td>!*</td>
<td>is all the arguments</td>
</tr>
<tr>
<td>!$</td>
<td>is the last argument. You can also use $_ to get the last argument of the previous command.</td>
</tr>
</tbody>
</table>
<h2 id="lines-in-history">Lines in history</h2>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>!-1</td>
<td>previous command</td>
</tr>
<tr>
<td>!-2, !-3, ...</td>
<td>are earlier commands and arguments can be extracted from earlier commands too</td>
</tr>
<tr>
<td>!-2^, !-2:2, !-2$, !-2*</td>
<td>you can extract particular arguments as well.</td>
</tr>
</tbody>
</table>
<h2 id="word-designators">Word designators</h2>
<p>Generally a colon (:) separates the event designator and the word designator, but it can be omitted, if the word designator begins with $, %, ^, *, or - . As well for for command line arguments from 1 to 9 ($1-$9)</p>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>the zero’th word (command name)</td>
</tr>
<tr>
<td>n</td>
<td>word n</td>
</tr>
<tr>
<td>ˆ</td>
<td>the first argument, i.e., word one (usually first argument of the command)</td>
</tr>
<tr>
<td>$</td>
<td>the last argument</td>
</tr>
<tr>
<td>%</td>
<td>the word matched by the most recent</td>
</tr>
<tr>
<td>!? str ?</td>
<td>search of str</td>
</tr>
<tr>
<td>x-y</td>
<td>words x through y . −y is short for 0−y</td>
</tr>
<tr>
<td>*</td>
<td>words 1 through the last (like 1−$ ) (all arguments)</td>
</tr>
<tr>
<td>n*</td>
<td>words n through the last (like n−$ )</td>
</tr>
</tbody>
</table>
<h2 id="modifiers">Modifiers:</h2>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>h</td>
<td>remove the part of a filename after last "/", leaving the path</td>
</tr>
<tr>
<td>t</td>
<td>remove all but the part of the filename after the last slash. for example for "/etc/resolv.conf" it will be resolv.conf</td>
</tr>
<tr>
<td>r</td>
<td>remove the last suffix of a filename (extension of the file). For example /etc/resolv</td>
</tr>
<tr>
<td>e</td>
<td>remove all but the last suffix of a filename (extension)</td>
</tr>
<tr>
<td>g</td>
<td>make changes globally, use with s modifier, below</td>
</tr>
<tr>
<td>p</td>
<td>print the command but do not execute it</td>
</tr>
<tr>
<td>q</td>
<td>quote the generated text</td>
</tr>
<tr>
<td>s/old/new/</td>
<td>substitute new for old in the text. Any delimiter may be used. An &amp; in the argument means the value of old. With empty old , use last old , or the most recent !? str ? search if there was no previous old</td>
</tr>
<tr>
<td>x</td>
<td>quote the generated text, but break into words at blanks and newline</td>
</tr>
<tr>
<td>&amp;</td>
<td>repeat the last substitution</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">echo this is a phrase
!:s/this/that&lt;tab&gt;
</code></pre>
<ul>
<li><a href="http://www.softpanorama.org/Scripting/Shellorama/Bash_as_command_interpreter/bash_command_history_reuse.shtml#Using_selected_capabilities_of_bang_command">Bash history reuse and bang commands</a></li>
<li><a href="https://ss64.com/bash/bang.html">Bash Bang (!) Commands - Linux - SS64.com</a></li>
<li><a href="https://jaysoo.ca/2009/09/16/unix-history-and-bang-commands/">Unix history and bang commands - Jack Hsu</a></li>
</ul>
<h1 id="send-command-to-all-panes">Send command to all panes</h1>
<pre><code>prefix :set-window-option synchronize-panes on|off
</code></pre>
<p>On a default configuration:</p>
<pre><code>ctrl-b :set-window-option synchronize-panes on
</code></pre>
<p>Credits to: <a href="http://openbsd-archive.7691.n7.nabble.com/tmux-send-command-to-all-panes-td95883.html">tmux send command to all panes</a></p>
<h1 id="how-to-upgrade-python-version">How to upgrade python version</h1>
<p>This is one way of compiling Python code and have it working on your system (Debian based)</p>
<p>Always visit <a href="https://www.python.org/downloads/">Download Python | Python.org</a> to check the newest releases of Python.</p>
<pre><code class="language-bash">#!/usr/bin/env bash

python_version=3.7.2

sudo apt-get update
sudo apt-get -y install \
  build-essential \
  checkinstall \
  libbz2-dev \
  libc6-dev \
  libffi-dev \
  libgdbm-dev \
  libncursesw5-dev \
  libreadline-gplv2-dev \
  libsqlite3-dev \
  libssl-dev \
  tk-dev

cd /usr/src
sudo wget https://www.python.org/ftp/python/${python_version}/Python-${python_version}.tgz
sudo tar xzf Python-${python_version}.tgz
cd Python-${python_version}
sudo ./configure --enable-optimizations
sudo make -j 4 altinstall

cd ~/

# Just being sure that the new version is installed
python3.7 -V

# If we check the current alternatives it will break
# update-alternatives --list python3

# One can always add other alternatives
sudo update-alternatives --install /usr/bin/python3 python3 /usr/local/bin/python3.7 1

# Just showing off that things are working now
namei &quot;$(which python3)&quot;
python3 -V
/usr/bin/env python3 -V
</code></pre>
<p>After executing this process, <code>pip</code> failed because it could not find <code>lsb_release</code>, creating a symbolic link solved this issue:</p>
<pre><code class="language-bash">sudo ln -s /usr/share/pyshared/lsb_release.py /usr/local/lib/python3.7/site-packages/lsb_release.py
</code></pre>
<p>Possible with the help of:</p>
<ul>
<li><a href="https://mintguide.org/other/794-python-3-6-install-latest-version-into-linux-mint.html">Python 3.6 - install latest version into Linux Mint</a></li>
<li><a href="https://tecadmin.net/install-python-3-7-on-ubuntu-linuxmint/">How To Install Python 3.7.0 on Ubuntu, Debian &amp; LinuxMint - TecAdmin</a></li>
<li><a href="https://askubuntu.com/questions/965043/no-module-named-lsb-release-after-install-python-3-6-3-from-source#answer-1003535">python3 - No module named 'lsb_release' after install Python 3.6.3 from source - Ask Ubuntu</a></li>
</ul>
<h1 id="wifi-after-hibernation">Wifi after hibernation</h1>
<p>Change <code>/etc/NetworkManager/conf.d/default-wifi-powersave-on.conf</code> to be:</p>
<pre><code>[connection]
wifi.powersave = 2
</code></pre>
<p>Don't know if it really helped anything, but at least now I know that I have wifi after hibernation.</p>
<h1 id="download-a-video-from-youtube">Download a video from youtube</h1>
<p>To download a video from youtube:</p>
<pre><code>youtube-dl --list-formats $youtube_link
</code></pre>
<p>After seeing the list of options and formats</p>
<pre><code>youtube-dl -f $format $youtube_link
</code></pre>
<p>e.g. for download only the audio:</p>
<pre><code>youtube-dl -f 140 $youtube_link
</code></pre>
<h1 id="convert-the-downloaded-audio">Convert the downloaded audio</h1>
<p>When you download the audio it have an <code>m4a</code> extension, to convert to a <code>mp3</code> audio file:</p>
<pre><code>ffmpeg -i $m4a_file -acodec libmp3lame -ab 128k ${m4a_file%.*}.mp3
</code></pre>
<p>To to a batch conversion, and have safe names:</p>
<pre><code>for file in *m4a; do rename 's/ /_/g' $file; done &amp;&amp; for file in *m4a; do ffmpeg -i $file -acodec libmp3lame -ab 128k ${file%.*}.mp3; done
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../mercurial/" class="btn btn-neutral float-right" title="Mercurial">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../latex/" class="btn btn-neutral" title="Latex"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../latex/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../mercurial/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
