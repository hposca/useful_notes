{
    "content": "<h1 id=\"dicas-para-o-awscli\">Dicas para o AWSCLI</h1>\n<p>Conjunto de dicas interessantes para se pegar informa\u00e7\u00f5es das m\u00e1quinas que est\u00e3o na Amazon.</p>\n<h2 id=\"pega-todas-as-variaveis-de-ambiente-de-um-ambiente-de-uma-aplicacao\">Pega todas as vari\u00e1veis de ambiente de um ambiente, de uma aplica\u00e7\u00e3o:</h2>\n<pre><code class=\"Bash\">application=&quot;safeguard&quot;\nenvironment=&quot;safeguard-staging5&quot;\naws elasticbeanstalk describe-configuration-settings --application-name $application --environment-name $environment --query &quot;ConfigurationSettings[].OptionSettings[?OptionName=='EnvironmentVariables']&quot;\n</code></pre>\n\n<h2 id=\"pega-o-nome-de-uma-ou-mais-instancias\">Pega o nome de uma ou mais inst\u00e2ncias</h2>\n<pre><code class=\"Bash\">instances=&quot;i-12345678 i-09876543&quot;\naws ec2 describe-instances --instance-ids $instances --query &quot;Reservations[].Instances[].Tags[?Key=='Name'].Value&quot; --output=text\n</code></pre>\n\n<h2 id=\"pega-informacoes-de-qual-ami-foi-utilizada-para-se-gerar-as-instancias\">Pega informa\u00e7\u00f5es de qual AMI foi utilizada para se gerar as inst\u00e2ncias:</h2>\n<pre><code class=\"Bash\">aws ec2 describe-instances --query &quot;Reservations[].Instances[*].[ImageId,Tags[?Key=='Name']]&quot;\n</code></pre>\n\n<h1 id=\"s3\">S3</h1>\n<h2 id=\"discovering-how-much-disk-space-a-bucket-is-using\">Discovering how much disk space a bucket is using</h2>\n<p>From <a href=\"http://stackoverflow.com/questions/8975959/aws-s3-how-do-i-see-how-much-disk-space-is-using\">this answer in StackOverflow</a>:</p>\n<pre><code>aws s3 ls s3://&lt;bucketname&gt; --recursive  | grep -v -E \"(Bucket: |Prefix: |LastWriteTime|^$|--)\" | awk 'BEGIN {total=0}{total+=$3}END{print total/1024/1024\" MB\"}'\n</code></pre>\n<h2 id=\"copying-the-content-between-buckets\">Copying the content between buckets</h2>\n<p>First step, see what it will do:</p>\n<pre><code>aws s3 sync s3://source-bucket s3://destination-bucket --dryrun\n</code></pre>\n<p>If everything looks fine, execute it:</p>\n<pre><code>aws s3 sync s3://source-bucket s3://destination-bucket\n</code></pre>", 
    "url": "/amazon/", 
    "language": "en", 
    "title": "Amazon"
}